---
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import NoteDate from "../../components/NoteDate.astro";

const title = "usr";

const cspNonce = Astro.locals.cspNonce;
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={title} description={title} />
  </head>
  <body>
    <Header />
    <main class="page" aria-label="File explorer">
      <NoteDate nonce={cspNonce} />
      <h1 class="page__title">usr/</h1>
      <ul class="tree" data-root>
        <li class="tree__item tree__item--folder" data-node="stack">
          <button class="tree__label" type="button">
            <span class="tree__chevron" aria-hidden="true">›</span><span
              class="tree__name">stack/</span
            >
          </button>
          <ul class="tree__children" hidden>
            <li class="tree__item tree__item--folder" data-node="frameworks">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">frameworks/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://lit.dev/"
                    target="_blank"
                    rel="noreferrer noopener">lit</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://angular.dev/"
                    target="_blank"
                    rel="noreferrer noopener">angular</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://astro.build/"
                    target="_blank"
                    rel="noreferrer noopener">astro</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://nextjs.org/"
                    target="_blank"
                    rel="noreferrer noopener">next.js</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://getbootstrap.com/"
                    target="_blank"
                    rel="noreferrer noopener">bootstrap</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://react.dev/"
                    target="_blank"
                    rel="noreferrer noopener">react</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://svelte.dev/"
                    target="_blank"
                    rel="noreferrer noopener">svelte</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://ionicframework.com/"
                    target="_blank"
                    rel="noreferrer noopener">ionic</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="apis">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">apis/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview"
                    target="_blank"
                    rel="noreferrer noopener">rest</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://graphql.org/"
                    target="_blank"
                    rel="noreferrer noopener">graphql</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API"
                    target="_blank"
                    rel="noreferrer noopener">websockets</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.postman.com/"
                    target="_blank"
                    rel="noreferrer noopener">postman</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="databases">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">databases/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.postgresql.org/"
                    target="_blank"
                    rel="noreferrer noopener">postgresql</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.mysql.com/"
                    target="_blank"
                    rel="noreferrer noopener">mysql</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://firebase.google.com/"
                    target="_blank"
                    rel="noreferrer noopener">firebase</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.mongodb.com/"
                    target="_blank"
                    rel="noreferrer noopener">mongodb</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="servers">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">servers/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://nodejs.org/"
                    target="_blank"
                    rel="noreferrer noopener">node.js</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://flask.palletsprojects.com/"
                    target="_blank"
                    rel="noreferrer noopener">flask</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://httpd.apache.org/"
                    target="_blank"
                    rel="noreferrer noopener">apache http server</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="platform">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">platform/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.cloudflare.com/"
                    target="_blank"
                    rel="noreferrer noopener">cloudflare</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://vercel.com/"
                    target="_blank"
                    rel="noreferrer noopener">vercel</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.netlify.com/"
                    target="_blank"
                    rel="noreferrer noopener">netlify</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://render.com/"
                    target="_blank"
                    rel="noreferrer noopener">render</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="tooling">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">tooling/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://git-scm.com/"
                    target="_blank"
                    rel="noreferrer noopener">git</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://github.com/"
                    target="_blank"
                    rel="noreferrer noopener">github</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.docker.com/"
                    target="_blank"
                    rel="noreferrer noopener">docker</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="networking">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">networking/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://tailscale.com/"
                    target="_blank"
                    rel="noreferrer noopener">tailscale</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.netacad.com/courses/packet-tracer"
                    target="_blank"
                    rel="noreferrer noopener">cisco packet tracer</a
                  >
                </li>
              </ul>
            </li>

            <li class="tree__item tree__item--folder" data-node="homelab">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">homelab/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://nginxproxymanager.com/"
                    target="_blank"
                    rel="noreferrer noopener">nginx proxy manager</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.portainer.io/"
                    target="_blank"
                    rel="noreferrer noopener">portainer</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://github.com/dani-garcia/vaultwarden"
                    target="_blank"
                    rel="noreferrer noopener">vaultwarden</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://joplinapp.org/"
                    target="_blank"
                    rel="noreferrer noopener">joplin</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://immich.app/"
                    target="_blank"
                    rel="noreferrer noopener">immich</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://opencloud.eu/"
                    target="_blank"
                    rel="noreferrer noopener">opencloud</a
                  >
                </li>
              </ul>
            </li>
            <li class="tree__item tree__item--folder" data-node="design">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">design/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.figma.com/"
                    target="_blank"
                    rel="noreferrer noopener">figma</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.framer.com/"
                    target="_blank"
                    rel="noreferrer noopener">framer</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.adobe.com/products/illustrator.html"
                    target="_blank"
                    rel="noreferrer noopener">illustrator</a
                  >
                </li>
              </ul>
            </li>
            <li class="tree__item tree__item--folder" data-node="creative">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">creative/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.adobe.com/products/premiere.html"
                    target="_blank"
                    rel="noreferrer noopener">premiere pro</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.blender.org/"
                    target="_blank"
                    rel="noreferrer noopener">blender</a
                  >
                </li>
                <li class="tree__item tree__item--file">
                  <a
                    href="https://www.autodesk.com/products/maya/"
                    target="_blank"
                    rel="noreferrer noopener">maya</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="tree__item tree__item--folder" data-node="exp">
          <button class="tree__label" type="button">
            <span class="tree__chevron" aria-hidden="true">›</span><span
              class="tree__name">exp/</span
            >
          </button>
          <ul class="tree__children" hidden>
            <li class="tree__item tree__item--folder" data-node="jobs">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">jobs/</span
                >
              </button>
              <ul class="tree__children" hidden data-kind="jobs"></ul>
            </li>
            <li class="tree__item tree__item--folder" data-node="education">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">education/</span
                >
              </button>
              <ul class="tree__children" hidden data-kind="education"></ul>
            </li>
          </ul>
        </li>
        <li class="tree__item tree__item--folder" data-node="misc">
          <button class="tree__label" type="button">
            <span class="tree__chevron" aria-hidden="true">›</span><span
              class="tree__name">misc/</span
            >
          </button>
          <ul class="tree__children" hidden>
            <li class="tree__item tree__item--folder" data-node="idioms">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">idioms/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">
                  english-fluent-c1.txt
                </li>
                <li class="tree__item tree__item--file">???-native.txt</li>
              </ul>
            </li>
            <li class="tree__item tree__item--folder" data-node="skills">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">skills/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">problem-solving.txt</li>
                <li class="tree__item tree__item--file">web-components.txt</li>
                <li class="tree__item tree__item--file">ui-ux-design.txt</li>
                <li class="tree__item tree__item--file">
                  full-stack-development.txt
                </li>
                <li class="tree__item tree__item--file">
                  security-and-privacy.txt
                </li>
              </ul>
            </li>
            <li class="tree__item tree__item--folder" data-node="interests">
              <button class="tree__label" type="button">
                <span class="tree__chevron" aria-hidden="true">›</span><span
                  class="tree__name">interests/</span
                >
              </button>
              <ul class="tree__children" hidden>
                <li class="tree__item tree__item--file">weightlifting.txt</li>
                <li class="tree__item tree__item--file">nature-walks.txt</li>
                <li class="tree__item tree__item--file">pet-training.txt</li>
                <li class="tree__item tree__item--file">chess.txt</li>
                <li class="tree__item tree__item--file">formula-1.txt</li>
                <li class="tree__item tree__item--file">motorcycles.txt</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </main>
    <Footer />
    <script is:inline nonce={cspNonce}>
      (() => {
        const root = document.querySelector(".tree[data-root]");
        if (!root) return;

        // Ensure dynamically-created nodes receive the same Astro scope attribute
        const scopeAttr = Array.from(root.attributes).find((attr) =>
          attr.name.startsWith("data-astro-cid-"),
        );
        const applyScope = (el) => {
          if (!scopeAttr || !el || !(el instanceof Element)) return;
          el.setAttribute(scopeAttr.name, scopeAttr.value ?? "");
        };
        let dynamicFolderId = 0;

        const getParts = (item) => {
          const children = item.querySelector(":scope > .tree__children");
          const label = item.querySelector(":scope > .tree__label");
          const chevron = item.querySelector(
            ":scope > .tree__label > .tree__chevron",
          );
          if (!children || !label || !chevron) return null;
          return { children, label, chevron };
        };

        const toggleFolder = (item) => {
          const parts = getParts(item);
          if (!parts) return;
          const { children, label, chevron } = parts;

          const isOpen = !children.hidden;
          children.hidden = isOpen;
          item.classList.toggle("is-open", !isOpen);
          chevron.textContent = !isOpen ? "⌄" : "›";
          label.setAttribute("aria-expanded", String(!isOpen));
        };

        const createScopedEl = (tag, className, text) => {
          const el = document.createElement(tag);
          if (className) el.className = className;
          if (text !== undefined) el.textContent = text;
          applyScope(el);
          return el;
        };

        const appendFileLine = (container, className, text) => {
          const li = createScopedEl(
            "li",
            `tree__item tree__item--file ${className}`,
            text,
          );
          container.appendChild(li);
        };

        const createFolderEntry = (name) => {
          const item = createScopedEl("li", "tree__item tree__item--folder");
          const button = createScopedEl("button", "tree__label");
          button.type = "button";

          const chevron = createScopedEl("span", "tree__chevron", "›");
          const nameSpan = createScopedEl("span", "tree__name", name);
          button.appendChild(chevron);
          button.appendChild(nameSpan);

          const details = createScopedEl("ul", "tree__children");
          details.hidden = true;
          details.id = `tree-children-dynamic-${dynamicFolderId++}`;
          button.setAttribute("aria-expanded", "false");
          button.setAttribute("aria-controls", details.id);

          item.appendChild(button);
          item.appendChild(details);
          return { item, details };
        };

        const hydrateEntries = (container, entries, fillDetails) => {
          if (!container || container.dataset.loaded === "true") return;
          container.dataset.loaded = "true";

          entries.forEach((entry) => {
            const { item, details } = createFolderEntry(entry.name);
            fillDetails(details, entry);
            container.appendChild(item);
          });
        };

        const hydrateJobs = (container) => {
          const jobs = [
            {
              name: "app-making-job/",
              title: "application engineer",
              description:
                "Software company that develops digital solutions such as websites, online stores and applications, with integration of management systems to support digital transformation of businesses.",
              bullets: [],
              workType: "Hybrid",
              duration: "feb. 2026 - present",
            },
            {
              name: "public-sector-ai-project/",
              title: "software engineer",
              description:
                "Project focused on applying Artificial Intelligence, NLP, Generative AI, and Data Science to optimize administrative processes and enhance digital governance in public administration.",
              bullets: [
                "Developing the chatbot avatar and voice interaction system, including speech-to-text translation, response integration, and realistic lip-synchronization for natural interactions between citizens and staff.",
              ],
              workType: "Remote",
              duration: "sep. 2025 - jan. 2026",
            },
            {
              name: "cloud-management-internship/",
              title: "software engineering intern",
              description:
                "Cloud management solutions provider for the finance, HR, accounting, and retail sectors.",
              bullets: [
                "Built interactive intro sliders that reduced user onboarding time by 15%, leveraging best-in-class UX design principles for banking platform enhancements.",
                "Directed the development of a web component designed for managing document elements within the company, as part of an evaluation project.",
                "Implemented a new expression editor, leveraging feedback from users to continuously enhance its functionality and experience by conducting usability tests. Merged with the previous project.",
              ],
              workType: "Hybrid",
              duration: "aug. 2024 - jul. 2025",
            },
          ];

          hydrateEntries(container, jobs, (details, job) => {
            appendFileLine(details, "job-title", job.title);
            appendFileLine(details, "job-description", job.description);
            job.bullets.forEach((bullet) => {
              appendFileLine(details, "job-bullet", `• ${bullet}`);
            });
            appendFileLine(
              details,
              "job-meta",
              `work: ${String(job.workType).toLowerCase()}`,
            );
            appendFileLine(details, "job-meta", `duration: ${job.duration}`);
          });
        };

        const hydrateEducation = (container) => {
          const education = [
            {
              name: "masters-software-engineering/",
              title: "master’s in software engineering",
              period: "sep. 2025 - exp: jun. 2027",
              highlights: [
                "Software architecture, testing, and engineering practices.",
                "Focus on building reliable systems end-to-end.",
              ],
            },
            {
              name: "bachelors-computer-science/",
              title: "bachelor’s in computer science",
              period: "sep. 2022 - jun. 2025",
              highlights: [
                "Core CS fundamentals (algorithms, data structures, systems).",
                "Databases + web development foundations.",
              ],
            },
          ];

          hydrateEntries(container, education, (details, edu) => {
            appendFileLine(details, "edu-title", edu.title);
            appendFileLine(details, "edu-meta", `period: ${edu.period}`);
            edu.highlights.forEach((h) => {
              appendFileLine(details, "edu-bullet", `• ${h}`);
            });
          });
        };

        // Prefetch jobs on page load so the folder opens instantly
        const jobsContainer = root.querySelector(
          '.tree__children[data-kind="jobs"]',
        );
        if (jobsContainer instanceof HTMLElement) {
          hydrateJobs(jobsContainer);
        }

        // Prefetch education on page load so the folder opens instantly
        const educationContainer = root.querySelector(
          '.tree__children[data-kind="education"]',
        );
        if (educationContainer instanceof HTMLElement) {
          hydrateEducation(educationContainer);
        }

        const folders = root.querySelectorAll(".tree__item--folder");
        folders.forEach((item, index) => {
          if (!(item instanceof HTMLElement)) return;
          const parts = getParts(item);
          if (!parts) return;
          const { children, label } = parts;
          if (!children.id) children.id = `tree-children-${index}`;
          label.setAttribute("aria-expanded", String(!children.hidden));
          label.setAttribute("aria-controls", children.id);
        });

        root.addEventListener("click", (event) => {
          const target = event.target;
          if (!(target instanceof Element)) return;
          const label = target.closest(".tree__label");
          if (!label) return;
          const item = label.closest(".tree__item");
          if (!item) return;

          const children = getParts(item)?.children;
          if (children && children.dataset.kind === "jobs") {
            hydrateJobs(children);
          }
          if (children && children.dataset.kind === "education") {
            hydrateEducation(children);
          }

          toggleFolder(item);
        });

        root.addEventListener("keydown", (event) => {
          const target = event.target;
          if (!(target instanceof Element)) return;
          const label = target.closest(".tree__label");
          if (!label) return;
          const item = label.closest(".tree__item--folder");
          if (!(item instanceof HTMLElement)) return;
          const parts = getParts(item);
          if (!parts) return;

          if (event.key === "ArrowRight") {
            if (parts.children.hidden) toggleFolder(item);
            event.preventDefault();
            return;
          }

          if (event.key === "ArrowLeft") {
            if (!parts.children.hidden) {
              toggleFolder(item);
              event.preventDefault();
              return;
            }

            const parentItem = item.parentElement?.closest(
              ".tree__item--folder",
            );
            const parentLabel = parentItem?.querySelector(
              ":scope > .tree__label",
            );
            if (parentLabel instanceof HTMLElement) {
              parentLabel.focus();
              event.preventDefault();
            }
          }
        });
      })();
    </script>
  </body>
</html>
